
/*
 *
 * CS-413 Spring 98
 * shell.l: lexical analyzer for shell
 * You have to extend it.
 *
 */

%{

#include <string.h>
#include "y.tab.h"

%}

%%

\n 	{
		return NEWLINE;
}
[ \t] 	{
		/* Discard spaces and tabs */
}
">" {
        return GREAT;
}
">>" {
        return GREATGREAT;
}
">>&" {
        return GREATGREATAMPERSAND;
}
"<" {
        return LESS;
}
"|" {
        return PIPE;
}
">&" {
    return GREATAMPERSAND;
}
"&" {
    return AMPERSAND;
}

["][^"]*["]    {
            yylval.string_val = strdup(yytext+1);
            if(yylval.string_val[yyleng-2] == '"')
                yylval.string_val[yyleng-2] = 0;
            return WORD;
        }

[\`][^\`]*[\`]    {
            yylval.string_val = strdup(yytext+1);
            if(yylval.string_val[yyleng-2] == '`')
                yylval.string_val[yyleng-2] = 0;
            return SHELLWORD;
        }

[^ ^\\&<>|\t\n][^ ^\\&<>|\t\n]*  {
        //char* string = strdup(yytext);
        /* Assume that file names have only alpha chars */
        yylval.string_val = strdup(yytext);
        return WORD;
    }

.    {
        /* Invalid character in input */
        return NOTOKEN;
    }

%%